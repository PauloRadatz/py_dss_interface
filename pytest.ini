[pytest]
# Pytest configuration for py_dss_interface
# 
# Automatic Individual Test Execution:
# On Linux or when using C++ backend (Windows), tests are automatically
# run individually in separate subprocesses to prevent memory leak issues.
# This is handled by the pytest_runtest_protocol hook in conftest.py.
#
# Command-line Options:
# - --run-together: Run all tests together (even on Linux/C++). Overrides automatic
#   individual execution. Use this if you want to test memory management fixes.
#   Example: pytest --run-together tests/
#
# Environment Variables:
# - PY_DSS_INTERFACE_CPP=true: Force C++ backend detection on Windows
#   Example: PY_DSS_INTERFACE_CPP=true pytest tests/
#
# - PY_DSS_INTERFACE_RUN_TOGETHER=true: Override to run all tests together
#   (even on Linux/C++). Alternative to --run-together flag.
#   Example: PY_DSS_INTERFACE_RUN_TOGETHER=true pytest tests/
#
# On Linux: Tests automatically run individually (Linux always uses C++)
# On Windows: Individual execution is triggered when C++ backend is detected

testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts = 
    -ra
    --strict
    --tb=short
